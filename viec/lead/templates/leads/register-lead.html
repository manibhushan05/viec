{% extends "student/base.html" %}
{% load static %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'vendors/select2/css/select2.min.css' %}">
{% endblock %}
{% block pageTitle %}
    <h3 class="titleTop">Update Driver</h3>
{% endblock %}
{% block content %}
    <!-- page content -->
        <div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_right text-right">
                <h3> Lead Registration Form </h3>
               </div>
            </div>
             <div class="clearfix"></div>
<!-- ****************************************************************  -->
            <div class="row">
              <div class="x_panel">
                <div class="x_content">
                  <br />
                  <form class="form-label-left input_mask" id="lead_form" data-parsely-validate="" >
                    <div class="col-md-4 col-sm-12  form-group has-feedback">
                    <input type="text" class="form-control has-feedback-left" id="lead_first_name" name="first_name" data-parsley-required="true" data-parsley-pattern="^[a-zA-Z]+$" data-parsley-trigger="keyup" data-parsley-errors-messages-disabled placeholder="First Name*">
                      <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                    </div>

                    <div class="col-md-4 col-sm-12  form-group has-feedback">
                      <input type="text" class="form-control has-feedback-left" id="lead_middle_name" name="middle_name" placeholder="Middle Name">
                    <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                    </div>

                    <div class="col-md-4 col-sm-12  form-group has-feedback">
                      <input type="text" class="form-control has-feedback-left" id="lead_lastname" name="last_name" data-parsley-required="true" data-parsley-pattern="^[a-zA-Z]+$" data-parsley-trigger="keyup" data-parsley-errors-messages-disabled placeholder="Last Name">
                    <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                    </div>

                    <div class="col-md-8 col-sm-12  form-group ">
                      <input type="text" class="form-control " id="lead_address" name="address" placeholder="Address">
                    </div>

                    <div class="col-md-4 col-sm-12  form-group ">
                      <input type="text" class="form-control " id="lead_city" name="city" placeholder="City/Town">
                    </div>

                    <div class="col-md-4 col-sm-12  form-group ">
                    <select id="country" name ="country" class="form-control select2"></select>
                    </div>

                    <div class="col-md-4 col-sm-12  form-group ">
                      <select id="state" name ="state" class="form-control select2"></select>
                    </div>

                    <div class="col-md-4 col-sm-12  form-group ">
                      <input type="text" class="form-control " id="lead_postal" name="postal" placeholder="Postal/Zip">
                    </div>
                    <div class="col-md-6 col-sm-6  form-group has-feedback">
                      <input type="text" class="form-control has-feedback-left" id="lead_email" name="email" data-parsley-required="true" data-parsley-type="email" data-parsley-trigger="keyup" data-parsley-errors-messages-disabled placeholder="Email">
                      <span class="fa fa-envelope form-control-feedback left" aria-hidden="true"></span>
                    </div>

                    <div class="col-md-6 col-sm-6  form-group has-feedback">
                      <input type="text" class="form-control" id="lead_phone" name="phone" data-parsley-required="true" data-parsley-type="digits" data-parsley-trigger="keyup"  data-parsley-errors-messages-disabled placeholder="Phone*">
                      <span class="fa fa-phone form-control-feedback right" aria-hidden="true"></span>
                    </div>

                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 ">Gender <span class="text-danger">*</span></label>
                      <div class="col-md-9 col-sm-9 ">
                        M:
                        <input type="radio" class="flat" name="gender" id="genderM" value="M" data-parsley-required="true" /> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp F:
                        <input type="radio" class="flat" name="gender" id="genderF" value="F" data-parsley-required="true"/>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Visa Type <span class="text-danger">*</span>
                      </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id="visa_type" name="visa_type" class="form-control select2" data-parsley-required="true" >
                          <option value="">--Select Visa--</option>
                          <option value="study">Study Visa</option>
                          <option value="tourist">Tourist Visa</option>
                        </select>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Country Interested <span class="text-danger">*</span>
                      </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id="country2" name="country_interested" class="form-control select2" data-parsley-required="true" >
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 ">Course Interested </label>
                      <div class="col-md-9 col-sm-9 ">
                        <input type="text" class="form-control" id="course_interested" name="course_interested" placeholder="Course Interested">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Type of Lead <span class="text-danger">*</span>
                      </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id="lead_type" name="lead_type" class="form-control select2" data-parsley-required="true" >
                          <option value="">--Select Lead--</option>
                          <option value="cold">Cold</option>
                          <option value="warm">Warm</option>
                          <option value="hot">Hot</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Color of Lead <span class="text-danger">*</span>
                      </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id="lead_color" name="lead_color" class="form-control select2" data-parsley-required="true" >
                          <option value="">--Select Color--.</option>
                          <option value="cold">Green</option>
                          <option value="warm">Yellow</option>
                          <option value="hot">Red</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Month Intake </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id='lead_intake' name="lead_intake" class="form-control select2">
                          <option value="">--Select Month--</option>
                          <option value='1'>Janaury</option>
                          <option value='2'>February</option>
                          <option value='3'>March</option>
                          <option value='4'>April</option>
                          <option value='5'>May</option>
                          <option value='6'>June</option>
                          <option value='7'>July</option>
                          <option value='8'>August</option>
                          <option value='9'>September</option>
                          <option value='10'>October</option>
                          <option value='11'>November</option>
                          <option value='12'>December</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 "> Recommended By <span class="text-danger">*</span>
                      </label>
                      <div class="col-md-9 col-sm-9 ">
                        <select id="recommended_by" name="recommended_by" class="form-control select2" data-parsley-required="true" >
                          <option value="">--Select--</option>
                          <option value="friend">Friend</option>
                          <option value="student">Previous Student</option>
                          <option value="walkin">Walk-In</option>
                          <option value="subagent">Subagent</option>
                          <option value="otherbranch">Other Branch</option>
                        </select>
                      </div>
                    </div>

                    <div class="form-group row">
                      <label class="col-form-label col-md-3 col-sm-3 ">Remarks(20 chars min, 150 max)</label>
                      <div class="col-md-9 col-sm-9 ">
                        <textarea id="remarks"   class="form-control" name="remarks"  data-parsley-maxlength="150" ></textarea>
                      </div>
                    </div>


                    <div class="form-group row">
                      <div class="col-md-9 col-sm-9  offset-md-3">
                        <button type="button" class="btn btn-primary">Cancel</button>
             <button class="btn btn-primary" type="reset">Reset</button>
                        <button type="submit" id="submit" name="submit" class="btn btn-success" value="submit">Submit</button>
                      </div>
                    </div>

                  </form>

                </div>
              </div>
             </div>
<!-- ********************************************************************  -->
          </div>
        </div>
        <!-- /page content -->
{% endblock %}
{% block js %}
    <script src="{% static "vendors/select2/js/select2.min.js" %}" type="text/javascript"></script>
    <script src="{% static "vendors/jquery/js/parsley.min.js" %}" type="text/javascript"></script>
    <!-- serialize-->
    <script src="{% static "vendors/jquery/js/jquery.serializejson.min.js" %}" type="text/javascript"></script>
    <!-- NProgress -->
    <script src="{% static "vendors/nprogress/js/nprogress.js" %}"></script>
    <script src="{% static "vendors/notify/notify.min.js" %}" type="text/javascript"></script>
    <script src="{% static "viec/js/countries.js" %}" type="text/javascript"></script>
    <script language="javascript">
      populateCountries("country", "state"); // first parameter is id of country drop-down and second parameter is id of state drop-down
      populateCountries("country2");
      $(".select2").select2().change(function() { $(this).parsley().validate();
       });
      </script>
    <script>
    $('#submit').click(function (e) {
        let lead_form = $('#lead_form');
        if (!lead_form.parsley().isValid()) {
            return true;
        }
        alert(lead_form);
        e.preventDefault();
        NProgress.start();
        let data = lead_form.find(':input').filter(function () {
            return $.trim(this.value).length > 0
        }).serializeJSON();
        alert(JSON.stringify(data));
        $.ajax({
            url: "/auth/login/",
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(data)
        }).done(function (response, status) {
            NProgress.done();
            $.notify(response['msg'], {
            position: "top center",
            autoHideDelay: 10000,
            clickToHide: true,
            className: 'success'
        });
            {#location.href = '/api/dashboard/';#}
        }).fail(function (jqXHR, status, error) {
            $.notify(JSON.parse(jqXHR.responseText)['msg'], {
                position: "top center",
                autoHideDelay: 1000,
                clickToHide: true,
                className: 'error'
            });
            NProgress.done();
        });
        return false;
    });
</script>

{% endblock %}
